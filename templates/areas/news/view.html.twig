<section class="news-section">
    {% if editmode %}
        <div class="pimcore-editable">
            {{ pimcore_relations('newsItems', {
                'types': ['object'],
                'subtypes': {'object': ['object']},
                'classes': ['News'],
                'width': '100%'
            }) }}
        </div>
    {% endif %}
    
    {# Get relation objects #}
    {% set relations = pimcore_relations('newsItems').getElements() %}
    
    <div class="news-container">
        {% if relations|length > 0 %}
            {% for relation in relations %}
                {# Load the full News object #}
                {% set newsItem = pimcore_object(relation.getDestination()) %}
                {% if newsItem and newsItem.isPublished() %}
                    <div class="news-card {% if loop.last %}last-news-item{% endif %}">
                        <div class="news-image-container">
                            {% if newsItem.getThumbnail() %}
                                {{ newsItem.getThumbnail().getThumbnail({width: 290, height: 180}).getHTML()|raw }}
                            {% else %}
                                <div class="placeholder-image">290 x 180px</div>
                            {% endif %}
                        </div>
                        
                        <div class="news-content">
                            <h3 class="news-title">{{ newsItem.getTitle() }}</h3>
                            <div class="news-excerpt">{{ newsItem.getDescription() }}</div>
                            <div class="news-link-container">
                                <a href="{{pimcore_url({'id':element.getId()},'news-detail')}}" class="news-more-link">
                                    Read more &raquo;
                                </a>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        {% else %}
            {% if editmode %}
                <div class="no-news-message">Please add news items using the editor above</div>
            {% endif %}
        {% endif %}
    </div>
</section>